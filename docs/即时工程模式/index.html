<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  即时工程模式
  #

基于全面的PromptEngineering指南的Prompt Engineering技术的实际实现。

  1.配置
  #

配置部分概述了如何使用SpringAI设置和调优大型语言模型（LLM）。

  LLM提供程序选择
  #

对于即时工程，您将从选择模型开始。
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
    &lt;artifactId&gt;spring-ai-starter-model-anthropic&lt;/artifactId&gt;
&lt;/dependency&gt;
可以这样指定LLM模型名称：
.options(ChatOptions.builder()
        .model(&#34;claude-3-7-sonnet-latest&#34;)  // Use Anthropic&#39;s Claude model
        .build())
在
  参考文档中查找有关启用每个模型的详细信息。

  LLM输出配置
  #


  
在我们深入研究即时工程技术之前，有必要了解如何配置LLM的输出行为。Spring AI提供了几个配置选项，允许您通过ChatOptions构建器控制生成的各个方面。
所有配置都可以以编程方式应用，如下面的示例所示，或者在启动时通过Spring应用程序属性应用。

  温度
  #

温度控制模型响应的随机性或“创造性”。

较低的值（0.0-0.3）：更确定、更集中的响应。更适合于一致性至关重要的事实问题、分类或任务。
中等值（0.4-0.7）：在决定论和创造性之间平衡。适用于一般用例。
更高的值（0.8-1.0）：更具创造性、多样性和潜在的令人惊讶的响应。更适合创意写作、头脑风暴或产生多样的选择。

.options(ChatOptions.builder()
        .temperature(0.1)  // Very deterministic output
        .build())
理解温度对于快速工程至关重要，因为不同的技术受益于不同的温度设置。

  输出长度（MaxTokens）
  #

maxTokens参数限制模型在其响应中可以生成的标记（单词片段）数量。

低值（5-25）：用于单个单词、短短语或分类标签。
中等值（50-500）：用于段落或简短解释。
高值（1000&#43;）：用于长格式内容、故事或复杂解释。

.options(ChatOptions.builder()
        .maxTokens(250)  // Medium-length response
        .build())
设置适当的输出长度对于确保获得完整的响应而没有不必要的冗长非常重要。

  采样控制（Top-K和Top-P）
  #

这些参数使您能够在生成期间对令牌选择过程进行细粒度控制。">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://studyllm.github.io/docs/%E5%8D%B3%E6%97%B6%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%BC%8F/">
  <meta property="og:site_name" content="Spring AI 1.0.0">
  <meta property="og:title" content="即时工程模式">
  <meta property="og:description" content="即时工程模式 # 基于全面的PromptEngineering指南的Prompt Engineering技术的实际实现。
1.配置 # 配置部分概述了如何使用SpringAI设置和调优大型语言模型（LLM）。
LLM提供程序选择 # 对于即时工程，您将从选择模型开始。
&lt;dependency&gt; &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt; &lt;artifactId&gt;spring-ai-starter-model-anthropic&lt;/artifactId&gt; &lt;/dependency&gt; 可以这样指定LLM模型名称：
.options(ChatOptions.builder() .model(&#34;claude-3-7-sonnet-latest&#34;) // Use Anthropic&#39;s Claude model .build()) 在 参考文档中查找有关启用每个模型的详细信息。
LLM输出配置 # 在我们深入研究即时工程技术之前，有必要了解如何配置LLM的输出行为。Spring AI提供了几个配置选项，允许您通过ChatOptions构建器控制生成的各个方面。 所有配置都可以以编程方式应用，如下面的示例所示，或者在启动时通过Spring应用程序属性应用。
温度 # 温度控制模型响应的随机性或“创造性”。
较低的值（0.0-0.3）：更确定、更集中的响应。更适合于一致性至关重要的事实问题、分类或任务。 中等值（0.4-0.7）：在决定论和创造性之间平衡。适用于一般用例。 更高的值（0.8-1.0）：更具创造性、多样性和潜在的令人惊讶的响应。更适合创意写作、头脑风暴或产生多样的选择。 .options(ChatOptions.builder() .temperature(0.1) // Very deterministic output .build()) 理解温度对于快速工程至关重要，因为不同的技术受益于不同的温度设置。
输出长度（MaxTokens） # maxTokens参数限制模型在其响应中可以生成的标记（单词片段）数量。
低值（5-25）：用于单个单词、短短语或分类标签。 中等值（50-500）：用于段落或简短解释。 高值（1000&#43;）：用于长格式内容、故事或复杂解释。 .options(ChatOptions.builder() .maxTokens(250) // Medium-length response .build()) 设置适当的输出长度对于确保获得完整的响应而没有不必要的冗长非常重要。
采样控制（Top-K和Top-P） # 这些参数使您能够在生成期间对令牌选择过程进行细粒度控制。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
<title>即时工程模式 | Spring AI 1.0.0</title>
<link rel="icon" href="../../favicon.png" >
<link rel="manifest" href="../../manifest.json">
<link rel="canonical" href="https://studyllm.github.io/docs/%E5%8D%B3%E6%97%B6%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%BC%8F/">
<link rel="stylesheet" href="../../book.min.e9f68c3fff3d8236a489d16a9caf6de5e4d1a29c20eb4b5524e42cd30be4d319.css" integrity="sha256-6faMP/89gjakidFqnK9t5eTRopwg60tVJOQs0wvk0xk=" crossorigin="anonymous">
  <script defer src="../../fuse.min.js"></script>
  <script defer src="../../en.search.min.c2099fe8e92fda5a8bb2e37b214b3da69973489bb96981756a60dc5e82ee687b.js" integrity="sha256-wgmf6Okv2lqLsuN7IUs9pplzSJu5aYF1amDcXoLuaHs=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="../../"><span>Spring AI 1.0.0</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7b6a07f859f4dbd09b8c8b0aa4aaec3d" class="toggle"  />
    <label for="section-7b6a07f859f4dbd09b8c8b0aa4aaec3d" class="flex justify-between">
      <a href="../../docs/%E6%A6%82%E8%BF%B0/" class="">引言</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E6%A6%82%E8%BF%B0/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A6%82%E5%BF%B5/" class="">人工智能概念</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%85%A5%E9%97%A8/" class="">入门</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-98a69a52873ff4521c7cbc37085c53f4" class="toggle"  />
    <label for="section-98a69a52873ff4521c7cbc37085c53f4" class="flex justify-between">
      <a href="../../docs/%E8%81%8A%E5%A4%A9%E5%AE%A2%E6%88%B7%E7%AB%AFapi/" class="">聊天客户端API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E8%81%8A%E5%A4%A9%E5%AE%A2%E6%88%B7%E7%AB%AFapi/%E9%A1%BE%E9%97%AE/" class="">顾问API</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-19144567cc77a340e1f7113bf4cb4d96" class="toggle"  />
    <label for="section-19144567cc77a340e1f7113bf4cb4d96" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/" class="">弹簧AI API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-84cc529361af621bb91f1f556e56b344" class="toggle"  />
    <label for="section-84cc529361af621bb91f1f556e56b344" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/" class="">聊天模型API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B%E6%AF%94%E8%BE%83/" class="">聊天模型比较</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E4%BA%9A%E9%A9%AC%E9%80%8A%E5%9F%BA%E5%B2%A9%E5%8C%A1%E5%A8%81/" class="">基岩匡威API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-483267c6684da0c66b47ed3892aae3ae" class="toggle"  />
    <label for="section-483267c6684da0c66b47ed3892aae3ae" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E4%BA%BA%E7%B1%BB3/" class="">人类3聊天</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E4%BA%BA%E7%B1%BB3/%E4%BA%BA%E5%B7%A5%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%B7%B2%E5%BC%83%E7%94%A8/" class="">人工函数调用（已弃用）</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ddce6d1cf71999572cf58e906e650be8" class="toggle"  />
    <label for="section-ddce6d1cf71999572cf58e906e650be8" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/azure-openai%E8%BD%AF%E4%BB%B6/" class="">Azure OpenAI聊天</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/azure-openai%E8%BD%AF%E4%BB%B6/azure-openai%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8/" class="">Azure OpenAI函数调用（不推荐）</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/deepseek%E6%B7%B1%E5%BA%A6%E6%90%9C%E7%B4%A2/" class="">DeepSeek聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/docker%E6%A8%A1%E5%9E%8B%E8%BF%90%E8%A1%8C%E5%99%A8/" class="">Docker Model Runner聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e63102d10905af911b0f2f96b381f454" class="toggle"  />
    <label for="section-e63102d10905af911b0f2f96b381f454" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E8%B0%B7%E6%AD%8Cvertexai/" class="">谷歌VertexAI API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E8%B0%B7%E6%AD%8Cvertexai/vertexai%E5%8F%8C%E5%AD%90%E5%BA%A7/" class="">VertexAI双子座聊天</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E6%A0%BC%E7%BD%97%E5%85%8B/" class="">Groq聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E6%8B%A5%E6%8A%B1%E7%9A%84%E8%84%B8/" class="">拥抱式面部聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-efff3eaee6a054e21a884caaa9c9d1d0" class="toggle"  />
    <label for="section-efff3eaee6a054e21a884caaa9c9d1d0" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/mistral%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">Mistral AI聊天</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/mistral%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/mistral%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8D%E6%8E%A8%E8%8D%90/" class="">Mistral AI函数调用（不推荐）</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d719d8b286788a6b3bb151561cedf25e" class="toggle"  />
    <label for="section-d719d8b286788a6b3bb151561cedf25e" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E6%9C%80%E5%B0%8F%E6%9C%80%E5%A4%A7%E5%80%BC/" class="">MiniMax聊天</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E6%9C%80%E5%B0%8F%E6%9C%80%E5%A4%A7%E5%80%BC/minmaxfunction%E8%B0%83%E7%94%A8/" class="">函数调用</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/moonshot%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">Moonshot AI聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E8%8B%B1%E4%BC%9F%E8%BE%BEnvidia/" class="">NVIDIA聊天室</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b5a2272d9e0cd5e97218ab60fdc2811d" class="toggle"  />
    <label for="section-b5a2272d9e0cd5e97218ab60fdc2811d" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E5%A5%A5%E6%8B%89%E9%A9%ACollama/" class="">Ollama聊天</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E5%A5%A5%E6%8B%89%E9%A9%ACollama/ollama%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8D%E6%8E%A8%E8%8D%90/" class="">Ollama函数调用（不推荐）</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E5%9B%B0%E6%83%91%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">困惑聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7b5525ed1291badc6d8e708aba4b059d" class="toggle"  />
    <label for="section-7b5525ed1291badc6d8e708aba4b059d" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E5%BC%80%E6%94%BE%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">OpenAI聊天</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E5%BC%80%E6%94%BE%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/openai%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8D%E6%8E%A8%E8%8D%90/" class="">函数调用</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E5%8D%83%E5%B8%86/" class="">千帆聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B/%E6%99%BA%E6%B5%A6ai/" class="">智浦AI聊天</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-08f2008ddfd43562b35e6c7d7e0ade90" class="toggle"  />
    <label for="section-08f2008ddfd43562b35e6c7d7e0ade90" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E9%9F%B3%E9%A2%91%E5%9E%8B%E5%8F%B7/%E8%BD%AC%E5%BD%95api/" class="">转录API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E9%9F%B3%E9%A2%91%E5%9E%8B%E5%8F%B7/%E8%BD%AC%E5%BD%95api/azure-openai%E8%BD%AF%E4%BB%B6/" class="">Azure OpenAI转录</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E9%80%82%E5%BA%A6%E5%8C%96%E6%A8%A1%E5%9E%8B/%E5%BC%80%E6%94%BE%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">适度性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f3bce704ad81d7d95bfdcb61623d32c9" class="toggle"  />
    <label for="section-f3bce704ad81d7d95bfdcb61623d32c9" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/" class="">嵌入模型API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-de35e9a68012e455890ae329d58ec54e" class="toggle"  />
    <label for="section-de35e9a68012e455890ae329d58ec54e" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E4%BA%9A%E9%A9%AC%E9%80%8A%E5%9F%BA%E5%B2%A9/" class="">亚马逊基岩</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E4%BA%9A%E9%A9%AC%E9%80%8A%E5%9F%BA%E5%B2%A9/%E7%9B%B8%E5%B9%B2cohere/" class="">内聚层嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E4%BA%9A%E9%A9%AC%E9%80%8A%E5%9F%BA%E5%B2%A9/%E6%B3%B0%E5%9D%A6/" class="">Titan嵌入</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/azure-openai%E8%BD%AF%E4%BB%B6/" class="">Azure OpenAI嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/mistral%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">Mistral AI嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E6%9C%80%E5%B0%8F%E6%9C%80%E5%A4%A7%E5%80%BC/" class="">MiniMax聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/oci-genai%E5%85%AC%E5%8F%B8/" class="">Oracle云基础架构（OCI）GenAI嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E5%A5%A5%E6%8B%89%E9%A9%ACollama/" class="">Ollama嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/onnx%E5%8F%98%E5%8E%8B%E5%99%A8/" class="">变压器（ONNX）嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E5%BC%80%E6%94%BE%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">OpenAI嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E9%82%AE%E6%94%BFml/" class="">PostgresML嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E5%8D%83%E5%B8%86/" class="">千凡嵌件</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B/%E6%99%BA%E6%B5%A6ai/" class="">ZhiPuAI嵌入</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3247fe8da2bdf11331fdf12b135a2bd5" class="toggle"  />
    <label for="section-3247fe8da2bdf11331fdf12b135a2bd5" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E9%9F%B3%E9%A2%91%E5%9E%8B%E5%8F%B7/%E6%96%87%E6%9C%AC%E5%88%B0%E8%AF%AD%E9%9F%B3ttsapi/" class="">文本到语音（TTS）API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E9%9F%B3%E9%A2%91%E5%9E%8B%E5%8F%B7/%E6%96%87%E6%9C%AC%E5%88%B0%E8%AF%AD%E9%9F%B3ttsapi/%E5%BC%80%E6%94%BE%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">OpenAI文本到语音（TTS）</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b7bd5e743ef0ff8d5bae9e8b59690e88" class="toggle"  />
    <label for="section-b7bd5e743ef0ff8d5bae9e8b59690e88" class="flex justify-between">
      <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%9B%BE%E5%83%8F%E6%A8%A1%E5%9E%8B/" class="">映像模型API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%9B%BE%E5%83%8F%E6%A8%A1%E5%9E%8B/azure-openai%E8%BD%AF%E4%BB%B6/" class="">Azure OpenAI映像生成</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%9B%BE%E5%83%8F%E6%A8%A1%E5%9E%8B/%E5%BC%80%E6%94%BE%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="">OpenAI图像生成</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%9B%BE%E5%83%8F%E6%A8%A1%E5%9E%8B/%E7%A8%B3%E5%AE%9A%E6%80%A7/" class="">稳定性AI图像生成</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%9B%BE%E5%83%8F%E6%A8%A1%E5%9E%8B/%E5%BF%97%E6%99%AE%E8%89%BE/" class="">ZhiPuAI图像生成</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B/%E5%9B%BE%E5%83%8F%E6%A8%A1%E5%9E%8B/%E5%8D%83%E5%B8%86/" class="">千帆形象</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6d7ee8a8c290e614a8d4b11b94d5da92" class="toggle"  />
    <label for="section-6d7ee8a8c290e614a8d4b11b94d5da92" class="flex justify-between">
      <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/" class="">向量数据库</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/azure-ai%E6%9C%8D%E5%8A%A1/" class="">Azure AI服务</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/azure-cosmos%E6%95%B0%E6%8D%AE%E5%BA%93/" class="">Azure Cosmos数据库</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/apache-cassandra%E7%9F%A2%E9%87%8F%E5%AD%98%E5%82%A8/" class="">Apache Cassandra矢量存储</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%89%B2%E5%BA%A6chroma/" class="">色度（Chroma）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%B2%99%E5%8F%91%E5%BA%95%E5%BA%A7/" class="">沙发底座</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%BC%B9%E6%80%A7%E6%90%9C%E7%B4%A2/" class="">弹性搜索</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/gemfire%E5%85%AC%E5%8F%B8/" class="">GemFire矢量存储</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/mariadb%E7%9F%A2%E9%87%8F%E5%AD%98%E5%82%A8/" class="">MariaDB矢量存储</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%B8%A2%E5%B1%9E/" class="">鸢属</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/mongodb%E5%9C%B0%E5%9B%BE%E9%9B%86/" class="">MongoDB地图集</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/neo4j%E5%85%AC%E5%8F%B8/" class="">Neo4j公司</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%89%93%E5%BC%80%E6%90%9C%E7%B4%A2/" class="">打开搜索</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%94%B2%E9%AA%A8%E6%96%87%E5%85%AC%E5%8F%B8/" class="">Oracle Database 23ai-AI矢量搜索</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/pg%E8%BD%BD%E4%BD%93/" class="">PG载体</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%9D%BE%E6%9E%9C%E4%BD%93/" class="">松果体</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/qdrant%E8%B4%A8%E9%87%8F/" class="">Qdrant（质量）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/redisredis/" class="">Redis（Redis）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/sap%E9%9F%A9%E4%BA%9A/" class="">SAP HANA云</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%B1%BB%E5%9E%8B%E6%84%9Ftypesense/" class="">类型感（Typesense）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%BC%B1%E5%8C%96weaviate/" class="">弱化（Weaviate）</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0a037040fc55c435e3b657a1139d5658" class="toggle"  />
    <label for="section-0a037040fc55c435e3b657a1139d5658" class="flex justify-between">
      <a href="../../docs/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/" class="">检索增强生成</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90rag/etl%E7%AE%A1%E9%81%93/" class="">ETL管道</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA/" class="">结构化输出转换器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E8%81%8A%E5%A4%A9%E5%AE%A4%E5%AD%98%E5%82%A8%E5%99%A8/" class="">聊天室存储器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e44d7b55bf077e5f0c1b5b8f7d9dad2a" class="toggle"  />
    <label for="section-e44d7b55bf077e5f0c1b5b8f7d9dad2a" class="flex justify-between">
      <a href="../../docs/%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8/" class="">工具调用</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8/%E8%BF%81%E7%A7%BB%E5%88%B0toolcallback-api/" class="">从FunctionCallback迁移到ToolCallbackAPI</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f126def055d862aaf56bdc7e619542c7" class="toggle"  />
    <label for="section-f126def055d862aaf56bdc7e619542c7" class="flex justify-between">
      <a href="../../docs/%E6%A8%A1%E5%9E%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8D%8F%E8%AE%AEmcp/" class="">模型上下文协议（MCP）</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E6%A8%A1%E5%9E%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8D%8F%E8%AE%AEmcp/mcp%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%AF%E5%8A%A8%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F/" class="">MCP客户端引导启动程序</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E6%A8%A1%E5%9E%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8D%8F%E8%AE%AEmcp/mcp%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%AF%E5%8A%A8%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F/" class="">MCP服务器引导启动程序</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E6%A8%A1%E5%9E%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8D%8F%E8%AE%AEmcp/mcp%E5%AE%9E%E7%94%A8%E7%A8%8B%E5%BA%8F/" class="">MCP实用程序</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%A4%9A%E6%A8%A1%E6%80%81/" class="">多模态API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%8F%AF%E8%A7%82%E5%AF%9F%E6%80%A7/" class="">可观察性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0/" class="">评估和测试</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%87%BA%E8%B5%84%E6%8C%87%E5%8D%97/" class="">出资指南</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%8D%87%E7%BA%A7%E8%AF%B4%E6%98%8E/" class="">升级说明</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E6%8F%90%E7%A4%BA/" class="">提示</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%8D%B3%E6%97%B6%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%BC%8F/" class="active">即时工程模式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/docker%E4%BD%9C%E6%9B%B2/" class="">Docker作曲</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E6%B5%8B%E8%AF%95%E5%AE%B9%E5%99%A8/" class="">测试容器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E4%BA%91%E7%BB%91%E5%AE%9Acloud-bindings/" class="">云绑定（Cloud Bindings）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E7%9B%B8%E5%B9%B2cohere/" class="">OCI GenAI Cohere聊天</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E6%96%87%E6%9C%AC%E5%B5%8C%E5%85%A5/" class="">谷歌VertexAI文本嵌入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../docs/%E5%A4%9A%E6%A8%A1%E6%80%81%E5%B5%8C%E5%85%A5/" class="">谷歌VertexAI多模态嵌入</a>
  

        </li>
      
    
  </ul>










  
<ul>
  
  <li>
    <a href="https://github.com"  target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="../../svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>即时工程模式</h3>

  <label for="toc-control">
    
    <img src="../../svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#即时工程模式">即时工程模式</a>
      <ul>
        <li><a href="#1配置">1.配置</a></li>
        <li><a href="#llm提供程序选择">LLM提供程序选择</a></li>
        <li><a href="#llm输出配置">LLM输出配置</a></li>
        <li><a href="#温度">温度</a></li>
        <li><a href="#输出长度maxtokens">输出长度（MaxTokens）</a></li>
        <li><a href="#采样控制top-k和top-p">采样控制（Top-K和Top-P）</a></li>
        <li><a href="#结构化响应格式">结构化响应格式</a></li>
        <li><a href="#型号特定选项">型号特定选项</a></li>
        <li><a href="#2即时工程技术">2.即时工程技术</a></li>
        <li><a href="#21零炮提示">2.1零炮提示</a></li>
        <li><a href="#22单发和少发提示">2.2单发和少发提示</a></li>
        <li><a href="#23系统上下文和角色提示">2.3系统、上下文和角色提示</a></li>
        <li><a href="#系统提示">系统提示</a></li>
        <li><a href="#角色提示">角色提示</a></li>
        <li><a href="#上下文提示">上下文提示</a></li>
        <li><a href="#24后退提示">2.4后退提示</a></li>
        <li><a href="#25思想链cot">2.5思想链（CoT）</a></li>
        <li><a href="#26自一致性">2.6自一致性</a></li>
        <li><a href="#27思想树tot">2.7思想树（ToT）</a></li>
        <li><a href="#28自动提示工程">2.8自动提示工程</a></li>
        <li><a href="#29代码提示">2.9代码提示</a></li>
        <li><a href="#结论">结论</a></li>
        <li><a href="#参考文献">参考文献</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="即时工程模式">
  即时工程模式
  <a class="anchor" href="#%e5%8d%b3%e6%97%b6%e5%b7%a5%e7%a8%8b%e6%a8%a1%e5%bc%8f">#</a>
</h1>
<p>基于全面的PromptEngineering指南的Prompt Engineering技术的实际实现。</p>
<h2 id="1配置">
  1.配置
  <a class="anchor" href="#1%e9%85%8d%e7%bd%ae">#</a>
</h2>
<p>配置部分概述了如何使用SpringAI设置和调优大型语言模型（LLM）。</p>
<h2 id="llm提供程序选择">
  LLM提供程序选择
  <a class="anchor" href="#llm%e6%8f%90%e4%be%9b%e7%a8%8b%e5%ba%8f%e9%80%89%e6%8b%a9">#</a>
</h2>
<p>对于即时工程，您将从选择模型开始。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.ai<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>spring-ai-starter-model-anthropic<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>可以这样指定LLM模型名称：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>.<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">model</span>(<span style="color:#e6db74">&#34;claude-3-7-sonnet-latest&#34;</span>)  <span style="color:#75715e">// Use Anthropic&#39;s Claude model</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>())
</span></span></code></pre></div><p>在
  <a href="../chatmodel.html">参考文档</a>中查找有关启用每个模型的详细信息。</p>
<h2 id="llm输出配置">
  LLM输出配置
  <a class="anchor" href="#llm%e8%be%93%e5%87%ba%e9%85%8d%e7%bd%ae">#</a>
</h2>
<p>
  <img src="../../images/chat-options-flow.jpg" alt="聊天选项流" />
在我们深入研究即时工程技术之前，有必要了解如何配置LLM的输出行为。Spring AI提供了几个配置选项，允许您通过ChatOptions构建器控制生成的各个方面。
所有配置都可以以编程方式应用，如下面的示例所示，或者在启动时通过Spring应用程序属性应用。</p>
<h2 id="温度">
  温度
  <a class="anchor" href="#%e6%b8%a9%e5%ba%a6">#</a>
</h2>
<p>温度控制模型响应的随机性或“创造性”。</p>
<ul>
<li>较低的值（0.0-0.3）：更确定、更集中的响应。更适合于一致性至关重要的事实问题、分类或任务。</li>
<li>中等值（0.4-0.7）：在决定论和创造性之间平衡。适用于一般用例。</li>
<li>更高的值（0.8-1.0）：更具创造性、多样性和潜在的令人惊讶的响应。更适合创意写作、头脑风暴或产生多样的选择。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>.<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">temperature</span>(0.<span style="color:#a6e22e">1</span>)  <span style="color:#75715e">// Very deterministic output</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>())
</span></span></code></pre></div><p>理解温度对于快速工程至关重要，因为不同的技术受益于不同的温度设置。</p>
<h2 id="输出长度maxtokens">
  输出长度（MaxTokens）
  <a class="anchor" href="#%e8%be%93%e5%87%ba%e9%95%bf%e5%ba%a6maxtokens">#</a>
</h2>
<p><code>maxTokens</code>参数限制模型在其响应中可以生成的标记（单词片段）数量。</p>
<ul>
<li>低值（5-25）：用于单个单词、短短语或分类标签。</li>
<li>中等值（50-500）：用于段落或简短解释。</li>
<li>高值（1000+）：用于长格式内容、故事或复杂解释。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>.<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">maxTokens</span>(250)  <span style="color:#75715e">// Medium-length response</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>())
</span></span></code></pre></div><p>设置适当的输出长度对于确保获得完整的响应而没有不必要的冗长非常重要。</p>
<h2 id="采样控制top-k和top-p">
  采样控制（Top-K和Top-P）
  <a class="anchor" href="#%e9%87%87%e6%a0%b7%e6%8e%a7%e5%88%b6top-k%e5%92%8ctop-p">#</a>
</h2>
<p>这些参数使您能够在生成期间对令牌选择过程进行细粒度控制。</p>
<ul>
<li>Top-K：将标记选择限制为K个最可能的下一个标记。较高的值（例如，40-50）引入更多的多样性。</li>
<li>Top-P（核采样）：从累积概率超过P的最小令牌集中动态选择。0.8-0.95这样的值很常见。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>.<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">topK</span>(40)      <span style="color:#75715e">// Consider only the top 40 tokens</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">topP</span>(0.<span style="color:#a6e22e">8</span>)     <span style="color:#75715e">// Sample from tokens that cover 80% of probability mass</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>())
</span></span></code></pre></div><p>这些采样控制与温度-形状响应特性一起工作。</p>
<h2 id="结构化响应格式">
  结构化响应格式
  <a class="anchor" href="#%e7%bb%93%e6%9e%84%e5%8c%96%e5%93%8d%e5%ba%94%e6%a0%bc%e5%bc%8f">#</a>
</h2>
<p>除了纯文本响应（使用.content（））之外，SpringAI还可以使用.entity（）方法轻松地将LLM响应直接映射到Java对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> Sentiment {
</span></span><span style="display:flex;"><span>    POSITIVE, NEUTRAL, NEGATIVE
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Sentiment result <span style="color:#f92672">=</span> chatClient.<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;...&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">entity</span>(Sentiment.<span style="color:#a6e22e">class</span>);
</span></span></code></pre></div><p>当与指示模型返回结构化数据的系统提示相结合时，该功能特别强大。</p>
<h2 id="型号特定选项">
  型号特定选项
  <a class="anchor" href="#%e5%9e%8b%e5%8f%b7%e7%89%b9%e5%ae%9a%e9%80%89%e9%a1%b9">#</a>
</h2>
<p>虽然便携式<code>ChatOptions</code>在不同的LLM提供商之间提供了一致的接口，但SpringAI还提供了模型特定的选项类，这些类公开了提供商特定的功能和配置。这些特定于模型的选项允许您利用每个LLM提供程序的独特功能。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Using OpenAI-specific options</span>
</span></span><span style="display:flex;"><span>OpenAiChatOptions openAiOptions <span style="color:#f92672">=</span> OpenAiChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">model</span>(<span style="color:#e6db74">&#34;gpt-4o&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">temperature</span>(0.<span style="color:#a6e22e">2</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">frequencyPenalty</span>(0.<span style="color:#a6e22e">5</span>)      <span style="color:#75715e">// OpenAI-specific parameter</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">presencePenalty</span>(0.<span style="color:#a6e22e">3</span>)       <span style="color:#75715e">// OpenAI-specific parameter</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">responseFormat</span>(<span style="color:#66d9ef">new</span> ResponseFormat(<span style="color:#e6db74">&#34;json_object&#34;</span>))  <span style="color:#75715e">// OpenAI-specific JSON mode</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">seed</span>(42)                   <span style="color:#75715e">// OpenAI-specific deterministic generation</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>String result <span style="color:#f92672">=</span> chatClient.<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;...&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">options</span>(openAiOptions)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Using Anthropic-specific options</span>
</span></span><span style="display:flex;"><span>AnthropicChatOptions anthropicOptions <span style="color:#f92672">=</span> AnthropicChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">model</span>(<span style="color:#e6db74">&#34;claude-3-7-sonnet-latest&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">temperature</span>(0.<span style="color:#a6e22e">2</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">topK</span>(40)                   <span style="color:#75715e">// Anthropic-specific parameter</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">thinking</span>(AnthropicApi.<span style="color:#a6e22e">ThinkingType</span>.<span style="color:#a6e22e">ENABLED</span>, 1000)  <span style="color:#75715e">// Anthropic-specific thinking configuration</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>String result <span style="color:#f92672">=</span> chatClient.<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;...&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">options</span>(anthropicOptions)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">content</span>();
</span></span></code></pre></div><p>每个模型提供程序都有自己的聊天选项实现（例如，<code>OpenAiChatOptions</code>、<code>AnthropicChatOptions</code>、MistralAiChatOption），这些选项公开特定于提供程序的参数，同时仍然实现通用接口。当您需要访问特定提供程序的独特功能时，此方法为您提供了使用可移植选项实现跨提供程序兼容性或特定于模型的选项的灵活性。
请注意，当使用特定于模型的选项时，代码将绑定到该特定的提供程序，从而降低可移植性。这是在访问特定于提供商的高级功能与在应用程序中维护提供商独立性之间的权衡。</p>
<h2 id="2即时工程技术">
  2.即时工程技术
  <a class="anchor" href="#2%e5%8d%b3%e6%97%b6%e5%b7%a5%e7%a8%8b%e6%8a%80%e6%9c%af">#</a>
</h2>
<p>下面的每个部分都实现了指南中的特定提示工程技术。</p>
<h2 id="21零炮提示">
  2.1零炮提示
  <a class="anchor" href="#21%e9%9b%b6%e7%82%ae%e6%8f%90%e7%a4%ba">#</a>
</h2>
<p>零触发提示涉及要求人工智能在不提供任何示例的情况下执行任务。这种方法测试模型从头开始理解和执行指令的能力。大型语言模型在大量文本语料库上训练，使它们能够在没有明确演示的情况下理解“翻译”、“总结”或“分类”等任务所需的内容。
Zero shot非常适合于简单的任务，其中模型可能在训练期间看到类似的示例，并且您希望最小化提示长度。然而，性能可能会因任务复杂性和指令的制定情况而异。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.1: General prompting / zero shot (page 15)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_zero_shot</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">enum</span> Sentiment {
</span></span><span style="display:flex;"><span>        POSITIVE, NEUTRAL, NEGATIVE
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Sentiment reviewSentiment <span style="color:#f92672">=</span> chatClient.<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Classify movie reviews as POSITIVE, NEUTRAL or NEGATIVE.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Review: &#34;Her&#34; is a disturbing study revealing the direction
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            humanity is headed if AI is allowed to keep evolving,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            unchecked. I wish there were more movies like this masterpiece.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Sentiment:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">model</span>(<span style="color:#e6db74">&#34;claude-3-7-sonnet-latest&#34;</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">temperature</span>(0.<span style="color:#a6e22e">1</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">maxTokens</span>(5)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">build</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">entity</span>(Sentiment.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Output: &#34;</span> <span style="color:#f92672">+</span> reviewSentiment);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>此示例演示如何在不提供示例的情况下对电影评论情绪进行分类。请注意，低温（0.1）用于更具确定性的结果，以及直接.实体（Sentiment.class）映射到Java枚举。
参考文献：Brown，T.B.等人（2020）。“语言模型是很少的临时学习者。”arXiv:2005.14165。
  <a href="https://arxiv.org/abs/2005.14165">https://arxiv.org/abs/2005.14165</a></p>
<h2 id="22单发和少发提示">
  2.2单发和少发提示
  <a class="anchor" href="#22%e5%8d%95%e5%8f%91%e5%92%8c%e5%b0%91%e5%8f%91%e6%8f%90%e7%a4%ba">#</a>
</h2>
<p>少镜头提示为模型提供了一个或多个示例来帮助指导其响应，对于需要特定输出格式的任务特别有用。通过显示所需输入-输出对的模型示例，它可以学习模式，并将其应用于新的输入，而无需显式的参数更新。
一杆提供单个示例，当示例成本高昂或模式相对简单时，该示例非常有用。少数镜头使用多个示例（通常为3-5）来帮助模型更好地理解更复杂任务中的模式，或说明正确输出的不同变体。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.2: One-shot &amp; few-shot (page 16)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_one_shot_few_shots</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String pizzaOrder <span style="color:#f92672">=</span> chatClient.<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Parse a customer&#39;s pizza order into valid JSON
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            EXAMPLE 1:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            I want a small pizza with cheese, tomato sauce, and pepperoni.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            JSON Response:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            ```
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#34;size&#34;: &#34;small&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#34;type&#34;: &#34;normal&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#34;ingredients&#34;: [&#34;cheese&#34;, &#34;tomato sauce&#34;, &#34;pepperoni&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            ```
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            EXAMPLE 2:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Can I get a large pizza with tomato sauce, basil and mozzarella.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            JSON Response:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            ```
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#34;size&#34;: &#34;large&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#34;type&#34;: &#34;normal&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#34;ingredients&#34;: [&#34;tomato sauce&#34;, &#34;basil&#34;, &#34;mozzarella&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            ```
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Now, I would like a large pizza, with the first half cheese and mozzarella.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            And the other tomato sauce, ham and pineapple.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">model</span>(<span style="color:#e6db74">&#34;claude-3-7-sonnet-latest&#34;</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">temperature</span>(0.<span style="color:#a6e22e">1</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">maxTokens</span>(250)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">build</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>对于需要特定格式、处理边界情况的任务，或者在没有示例的情况下任务定义可能不明确的情况下，很少触发提示特别有效。示例的质量和多样性显著影响性能。
参考文献：Brown，T.B.等人（2020）。“语言模型是很少的临时学习者。”arXiv:2005.14165。
  <a href="https://arxiv.org/abs/2005.14165">https://arxiv.org/abs/2005.14165</a></p>
<h2 id="23系统上下文和角色提示">
  2.3系统、上下文和角色提示
  <a class="anchor" href="#23%e7%b3%bb%e7%bb%9f%e4%b8%8a%e4%b8%8b%e6%96%87%e5%92%8c%e8%a7%92%e8%89%b2%e6%8f%90%e7%a4%ba">#</a>
</h2>
<h2 id="系统提示">
  系统提示
  <a class="anchor" href="#%e7%b3%bb%e7%bb%9f%e6%8f%90%e7%a4%ba">#</a>
</h2>
<p>系统提示设置语言模型的总体上下文和目的，定义模型应该做什么的“大局”。它为模型的响应建立行为框架、约束和高级目标，与特定的用户查询分离。
系统提示在整个对话中充当持久的“任务陈述”，允许您设置全局参数，如输出格式、音调、道德边界或角色定义。与专注于特定任务的用户提示不同，系统提示确定了应如何解释所有用户提示。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.3.1: System prompting</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_system_prompting_1</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String movieReview <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">system</span>(<span style="color:#e6db74">&#34;Classify movie reviews as positive, neutral or negative. Only return the label in uppercase.&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Review: &#34;Her&#34; is a disturbing study revealing the direction
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    humanity is headed if AI is allowed to keep evolving,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    unchecked. It&#39;s so disturbing I couldn&#39;t watch it.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Sentiment:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">model</span>(<span style="color:#e6db74">&#34;claude-3-7-sonnet-latest&#34;</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">temperature</span>(1.<span style="color:#a6e22e">0</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">topK</span>(40)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">topP</span>(0.<span style="color:#a6e22e">8</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">maxTokens</span>(5)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">build</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>当与Spring AI的实体映射功能相结合时，系统提示特别强大：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.3.1: System prompting with JSON output</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">record</span> <span style="color:#a6e22e">MovieReviews</span>(Movie<span style="color:#f92672">[]</span> movie_reviews) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">enum</span> Sentiment {
</span></span><span style="display:flex;"><span>        POSITIVE, NEUTRAL, NEGATIVE
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">record</span> <span style="color:#a6e22e">Movie</span>(Sentiment sentiment, String name) {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>MovieReviews movieReviews <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">system</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                Classify movie reviews as positive, neutral or negative. Return
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                valid JSON.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">user</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                Review: &#34;Her&#34; is a disturbing study revealing the direction
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                humanity is headed if AI is allowed to keep evolving,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                unchecked. It&#39;s so disturbing I couldn&#39;t watch it.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                JSON Response:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">entity</span>(MovieReviews.<span style="color:#a6e22e">class</span>);
</span></span></code></pre></div><p>系统提示对于多回合对话、确保多个查询之间的一致行为以及建立应应用于所有响应的格式约束（如JSON输出）特别有用。
参考：OpenAI。（2022年）。“系统消息。”
  <a href="https://platform.openai.com/docs/guides/chat/introduction">https://platform.openai.com/docs/guides/chat/introduction</a></p>
<h2 id="角色提示">
  角色提示
  <a class="anchor" href="#%e8%a7%92%e8%89%b2%e6%8f%90%e7%a4%ba">#</a>
</h2>
<p>角色提示指示模型采用特定的角色或角色，这会影响其生成内容的方式。通过为模型分配特定的标识、专业知识或视角，可以影响其响应的样式、音调、深度和框架。
角色提示利用模型模拟不同专业领域和通信风格的能力。常见角色包括专家（例如，“你是一名经验丰富的数据科学家”）、专业人员（例如，”充当导游“）或文体角色（例如，&lsquo;像莎士比亚一样解释&rsquo;）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.3.2: Role prompting</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_role_prompting_1</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String travelSuggestions <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">system</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    I want you to act as a travel guide. I will write to you
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    about my location and you will suggest 3 places to visit near
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    me. In some cases, I will also give you the type of places I
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    will visit.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    My suggestion: &#34;I am in Amsterdam and I want to visit only museums.&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Travel Suggestions:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>可以使用样式说明来增强角色提示：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.3.2: Role prompting with style instructions</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_role_prompting_2</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String humorousTravelSuggestions <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">system</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    I want you to act as a travel guide. I will write to you about
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    my location and you will suggest 3 places to visit near me in
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    a humorous style.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    My suggestion: &#34;I am in Amsterdam and I want to visit only museums.&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Travel Suggestions:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>该技术对于专门的领域知识特别有效，在响应中实现一致的基调，并与用户创建更具吸引力的个性化交互。
参考文献：Shanahan，M.等人（2023）。“大型语言模型的角色扮演。”arXiv:2305.16367。
  <a href="https://arxiv.org/abs/2305.16367">https://arxiv.org/abs/2305.16367</a></p>
<h2 id="上下文提示">
  上下文提示
  <a class="anchor" href="#%e4%b8%8a%e4%b8%8b%e6%96%87%e6%8f%90%e7%a4%ba">#</a>
</h2>
<p>上下文提示通过传递上下文参数为模型提供额外的背景信息。该技术丰富了模型对特定情况的理解，在不干扰主指令的情况下实现更相关和定制的响应。
通过提供上下文信息，可以帮助模型理解与当前查询相关的特定域、受众、约束或背景事实。这导致更准确、相关和适当的框架响应。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.3.3: Contextual prompting</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_contextual_prompting</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String articleSuggestions <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(u <span style="color:#f92672">-&gt;</span> u.<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Suggest 3 topics to write an article about with a few lines of
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    description of what this article should contain.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Context: {context}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">param</span>(<span style="color:#e6db74">&#34;context&#34;</span>, <span style="color:#e6db74">&#34;You are writing for a blog about retro 80&#39;s arcade video games.&#34;</span>))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Spring AI通过param（）方法注入上下文变量来清除上下文提示。当模型需要特定的领域知识时，当将响应适应特定的受众或场景时，以及当确保响应与特定的约束或要求相一致时，该技术特别有价值。
参考文献：Liu，P.等人（2021）。“什么是GPT-3的良好上下文示例？”arXiv:2101.06804。
  <a href="https://arxiv.org/abs/2101.06804">https://arxiv.org/abs/2101.06804</a></p>
<h2 id="24后退提示">
  2.4后退提示
  <a class="anchor" href="#24%e5%90%8e%e9%80%80%e6%8f%90%e7%a4%ba">#</a>
</h2>
<p>后退提示通过首先获取背景知识将复杂的请求分解为简单的步骤。该技术鼓励模型首先从直接问题“后退”，以在处理特定查询之前考虑与问题相关的更广泛的上下文、基本原则或一般知识。
通过将复杂问题分解为更易于管理的组件，并首先建立基础知识，该模型可以为困难的问题提供更准确的响应。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.4: Step-back prompting</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_step_back_prompting</span>(ChatClient.<span style="color:#a6e22e">Builder</span> chatClientBuilder) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Set common options for the chat client</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> chatClient <span style="color:#f92672">=</span> chatClientBuilder
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">defaultOptions</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">model</span>(<span style="color:#e6db74">&#34;claude-3-7-sonnet-latest&#34;</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">temperature</span>(1.<span style="color:#a6e22e">0</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">topK</span>(40)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">topP</span>(0.<span style="color:#a6e22e">8</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">maxTokens</span>(1024)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">build</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// First get high-level concepts</span>
</span></span><span style="display:flex;"><span>    String stepBack <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Based on popular first-person shooter action games, what are
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    5 fictional key settings that contribute to a challenging and
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    engaging level storyline in a first-person shooter video game?
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Then use those concepts in the main task</span>
</span></span><span style="display:flex;"><span>    String story <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(u <span style="color:#f92672">-&gt;</span> u.<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Write a one paragraph storyline for a new level of a first-
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    person shooter video game that is challenging and engaging.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Context: {step-back}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">param</span>(<span style="color:#e6db74">&#34;step-back&#34;</span>, stepBack))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>后退提示对于复杂的推理任务、需要专门领域知识的问题，以及当您想要更全面和周到的响应而不是直接的答案时，特别有效。
参考文献：Zheng，Z.等人（2023）。“后退一步：在大型语言模型中通过抽象激发推理”。arXiv:2310.06117。
  <a href="https://arxiv.org/abs/2310.06117">https://arxiv.org/abs/2310.06117</a></p>
<h2 id="25思想链cot">
  2.5思想链（CoT）
  <a class="anchor" href="#25%e6%80%9d%e6%83%b3%e9%93%becot">#</a>
</h2>
<p>思维链提示鼓励模型在问题中逐步推理，这提高了复杂推理任务的准确性。通过明确要求模型显示其工作或以逻辑步骤思考问题，可以显著提高需要多步骤推理的任务的性能。
CoT的工作原理是鼓励模型在产生最终答案之前生成中间推理步骤，类似于人类解决复杂问题的方式。这使得模型的思维过程明确，并有助于它得出更准确的结论。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.5: Chain of Thought (CoT) - Zero-shot approach</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_chain_of_thought_zero_shot</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String output <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    When I was 3 years old, my partner was 3 times my age. Now,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    I am 20 years old. How old is my partner?
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Let&#39;s think step by step.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.5: Chain of Thought (CoT) - Few-shot approach</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_chain_of_thought_singleshot_fewshots</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String output <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Q: When my brother was 2 years old, I was double his age. Now
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    I am 40 years old. How old is my brother? Let&#39;s think step
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    by step.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    A: When my brother was 2 years, I was 2 * 2 = 4 years old.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    That&#39;s an age difference of 2 years and I am older. Now I am 40
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    years old, so my brother is 40 - 2 = 38 years old. The answer
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    is 38.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Q: When I was 3 years old, my partner was 3 times my age. Now,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    I am 20 years old. How old is my partner? Let&#39;s think step
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    by step.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    A:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>关键短语“让我们一步一步地思考”触发了模型，以显示其推理过程。CoT对于数学问题、逻辑推理任务和任何需要多步骤推理的问题特别有价值。它通过明确中间推理来帮助减少错误。
参考文献：Wei，J.等人（2022）。“思维链提示在大型语言模型中引发推理”，arXiv:2201.11903。
  <a href="https://arxiv.org/abs/2201.11903">https://arxiv.org/abs/2201.11903</a></p>
<h2 id="26自一致性">
  2.6自一致性
  <a class="anchor" href="#26%e8%87%aa%e4%b8%80%e8%87%b4%e6%80%a7">#</a>
</h2>
<p>自我一致性涉及多次运行模型，并聚合结果以获得更可靠的答案。该技术通过对同一问题的不同推理路径进行采样，并通过多数投票选择最一致的答案，来解决LLM输出的可变性。
通过生成具有不同温度或采样设置的多条推理路径，然后聚合最终答案，自一致性提高了复杂推理任务的准确性。它本质上是LLM输出的集成方法。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.6: Self-consistency</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_self_consistency</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String email <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Hi,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            I have seen you use Wordpress for your website. A great open
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            source content management system. I have used it in the past
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            too. It comes with lots of great user plugins. And it&#39;s pretty
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            easy to set up.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            I did notice a bug in the contact form, which happens when
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            you select the name field. See the attached screenshot of me
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            entering text in the name field. Notice the JavaScript alert
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            box that I inv0k3d.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            But for the rest it&#39;s a great website. I enjoy reading it. Feel
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            free to leave the bug in the website, because it gives me more
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            interesting things to read.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Cheers,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Harry the Hacker.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">record</span> <span style="color:#a6e22e">EmailClassification</span>(Classification classification, String reasoning) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">enum</span> Classification {
</span></span><span style="display:flex;"><span>            IMPORTANT, NOT_IMPORTANT
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> importantCount <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> notImportantCount <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Run the model 5 times with the same input</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 5; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        EmailClassification output <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">user</span>(u <span style="color:#f92672">-&gt;</span> u.<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                        Email: {email}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                        Classify the above email as IMPORTANT or NOT IMPORTANT. Let&#39;s
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                        think step by step and explain why.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                        &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#a6e22e">param</span>(<span style="color:#e6db74">&#34;email&#34;</span>, email))
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                        .<span style="color:#a6e22e">temperature</span>(1.<span style="color:#a6e22e">0</span>)  <span style="color:#75715e">// Higher temperature for more variation</span>
</span></span><span style="display:flex;"><span>                        .<span style="color:#a6e22e">build</span>())
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">entity</span>(EmailClassification.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Count results</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (output.<span style="color:#a6e22e">classification</span>() <span style="color:#f92672">==</span> EmailClassification.<span style="color:#a6e22e">Classification</span>.<span style="color:#a6e22e">IMPORTANT</span>) {
</span></span><span style="display:flex;"><span>            importantCount<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            notImportantCount<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Determine the final classification by majority vote</span>
</span></span><span style="display:flex;"><span>    String finalClassification <span style="color:#f92672">=</span> importantCount <span style="color:#f92672">&gt;</span> notImportantCount <span style="color:#f92672">?</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;IMPORTANT&#34;</span> : <span style="color:#e6db74">&#34;NOT IMPORTANT&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>自我一致性对于高风险决策、复杂的推理任务，以及当您需要比单个响应所能提供的更自信的答案时，特别有价值。代价是由于多个API调用而增加了计算成本和延迟。
参考文献：Wang，X.，et al.（2022）。“自我一致性改善了语言模型中的思维链推理”，arXiv:2203.11171。
  <a href="https://arxiv.org/abs/2203.11171">https://arxiv.org/abs/2203.11171</a></p>
<h2 id="27思想树tot">
  2.7思想树（ToT）
  <a class="anchor" href="#27%e6%80%9d%e6%83%b3%e6%a0%91tot">#</a>
</h2>
<p>思想树（ToT）是一种高级推理框架，它通过同时探索多个推理路径来扩展思想链。它将问题解决视为一个搜索过程，其中模型生成不同的中间步骤，评估其承诺，并探索最有希望的路径。
对于具有多个可能方法的复杂问题，或者当解决方案需要在找到最佳路径之前探索各种备选方案时，该技术特别强大。
游戏解决ToT示例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.7: Tree of Thoughts (ToT) - Game solving example</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_tree_of_thoughts_game</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Step 1: Generate multiple initial moves</span>
</span></span><span style="display:flex;"><span>    String initialMoves <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    You are playing a game of chess. The board is in the starting position.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Generate 3 different possible opening moves. For each move:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    1. Describe the move in algebraic notation
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    2. Explain the strategic thinking behind this move
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    3. Rate the move&#39;s strength from 1-10
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">temperature</span>(0.<span style="color:#a6e22e">7</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">build</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Step 2: Evaluate and select the most promising move</span>
</span></span><span style="display:flex;"><span>    String bestMove <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(u <span style="color:#f92672">-&gt;</span> u.<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Analyze these opening moves and select the strongest one:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    {moves}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Explain your reasoning step by step, considering:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    1. Position control
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    2. Development potential
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    3. Long-term strategic advantage
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Then select the single best move.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>).<span style="color:#a6e22e">param</span>(<span style="color:#e6db74">&#34;moves&#34;</span>, initialMoves))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Step 3: Explore future game states from the best move</span>
</span></span><span style="display:flex;"><span>    String gameProjection <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(u <span style="color:#f92672">-&gt;</span> u.<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Based on this selected opening move:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    {best_move}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Project the next 3 moves for both players. For each potential branch:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    1. Describe the move and counter-move
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    2. Evaluate the resulting position
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    3. Identify the most promising continuation
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Finally, determine the most advantageous sequence of moves.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>).<span style="color:#a6e22e">param</span>(<span style="color:#e6db74">&#34;best_move&#34;</span>, bestMove))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>参考文献：Yao，S.等人（2023）。思想树：用大型语言模型精心解决问题。arXiv:2305.10601。
  <a href="https://arxiv.org/abs/2305.10601">https://arxiv.org/abs/2305.10601</a></p>
<h2 id="28自动提示工程">
  2.8自动提示工程
  <a class="anchor" href="#28%e8%87%aa%e5%8a%a8%e6%8f%90%e7%a4%ba%e5%b7%a5%e7%a8%8b">#</a>
</h2>
<p>自动提示工程（Automatic Prompt Engineering）使用人工智能来生成和评估备选提示。这种元技术利用语言模型本身来创建、改进和基准测试不同的提示变体，以找到特定任务的最佳公式。
通过系统地生成和评估提示变量，APE可以找到比手动工程更有效的提示，特别是对于复杂任务。这是一种使用人工智能来提高自身性能的方法。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.8: Automatic Prompt Engineering</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_automatic_prompt_engineering</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Generate variants of the same request</span>
</span></span><span style="display:flex;"><span>    String orderVariants <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    We have a band merchandise t-shirt webshop, and to train a
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    chatbot we need various ways to order: &#34;One Metallica t-shirt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    size S&#34;. Generate 10 variants, with the same semantics but keep
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    the same meaning.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">temperature</span>(1.<span style="color:#a6e22e">0</span>)  <span style="color:#75715e">// High temperature for creativity</span>
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">build</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Evaluate and select the best variant</span>
</span></span><span style="display:flex;"><span>    String output <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(u <span style="color:#f92672">-&gt;</span> u.<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Please perform BLEU (Bilingual Evaluation Understudy) evaluation on the following variants:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    ----
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    {variants}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    ----
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Select the instruction candidate with the highest evaluation score.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>).<span style="color:#a6e22e">param</span>(<span style="color:#e6db74">&#34;variants&#34;</span>, orderVariants))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>APE对于优化生产系统的提示、解决手动提示工程已达到其极限的具有挑战性的任务以及在规模上系统地提高提示质量特别有价值。
参考文献：Zhou，Y.等人（2022）。“大型语言模型是人类级别的即时工程师。”arXiv:2211.01910。
  <a href="https://arxiv.org/abs/2211.01910">https://arxiv.org/abs/2211.01910</a></p>
<h2 id="29代码提示">
  2.9代码提示
  <a class="anchor" href="#29%e4%bb%a3%e7%a0%81%e6%8f%90%e7%a4%ba">#</a>
</h2>
<p>代码提示是指用于代码相关任务的专门技术。这些技术利用LLM理解和生成编程语言的能力，使它们能够编写新代码、解释现有代码、调试问题和在语言之间进行转换。
有效的代码提示通常涉及明确的规范、适当的上下文（库、框架、样式指南），有时还包括类似代码的示例。对于更确定的输出，温度设置通常较低（0.1-0.3）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.9.1: Prompts for writing code</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_code_prompting_writing_code</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String bashScript <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Write a code snippet in Bash, which asks for a folder name.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Then it takes the contents of the folder and renames all the
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    files inside by prepending the name draft to the file name.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">options</span>(ChatOptions.<span style="color:#a6e22e">builder</span>()
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">temperature</span>(0.<span style="color:#a6e22e">1</span>)  <span style="color:#75715e">// Low temperature for deterministic code</span>
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">build</span>())
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.9.2: Prompts for explaining code</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_code_prompting_explaining_code</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String code <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            #!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            echo &#34;Enter the folder name: &#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            read folder_name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            if [ ! -d &#34;$folder_name&#34; ]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            echo &#34;Folder does not exist.&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            exit 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            files=( &#34;$folder_name&#34;/* )
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            for file in &#34;${files[@]}&#34;; do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            new_file_name=&#34;draft_$(basename &#34;$file&#34;)&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            mv &#34;$file&#34; &#34;$new_file_name&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            echo &#34;Files renamed successfully.&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    String explanation <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(u <span style="color:#f92672">-&gt;</span> u.<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Explain to me the below Bash code:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    ```
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    {code}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    ```
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>).<span style="color:#a6e22e">param</span>(<span style="color:#e6db74">&#34;code&#34;</span>, code))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Implementation of Section 2.9.3: Prompts for translating code</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pt_code_prompting_translating_code</span>(ChatClient chatClient) {
</span></span><span style="display:flex;"><span>    String bashCode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            #!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            echo &#34;Enter the folder name: &#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            read folder_name
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            if [ ! -d &#34;$folder_name&#34; ]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            echo &#34;Folder does not exist.&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            exit 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            fi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            files=( &#34;$folder_name&#34;/* )
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            for file in &#34;${files[@]}&#34;; do
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            new_file_name=&#34;draft_$(basename &#34;$file&#34;)&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            mv &#34;$file&#34; &#34;$new_file_name&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            done
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            echo &#34;Files renamed successfully.&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    String pythonCode <span style="color:#f92672">=</span> chatClient
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">prompt</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">user</span>(u <span style="color:#f92672">-&gt;</span> u.<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    Translate the below Bash code to a Python snippet:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    {code}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>).<span style="color:#a6e22e">param</span>(<span style="color:#e6db74">&#34;code&#34;</span>, bashCode))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">call</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">content</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>代码提示对于自动代码文档、原型制作、学习编程概念和在编程语言之间进行翻译特别有价值。通过将其与少量提示或思维链等技术相结合，可以进一步提高效率。
参考文献：Chen，M.等人（2021）。“评估在代码上训练的大型语言模型。”arXiv:2107.03374。
  <a href="https://arxiv.org/abs/2107.03374">https://arxiv.org/abs/2107.03374</a></p>
<h2 id="结论">
  结论
  <a class="anchor" href="#%e7%bb%93%e8%ae%ba">#</a>
</h2>
<p>SpringAI提供了一个优雅的JavaAPI，用于实现所有主要的提示工程技术。通过将这些技术与Spring强大的实体映射和流畅的API相结合，开发人员可以用干净、可维护的代码构建复杂的人工智能应用程序。
最有效的方法通常涉及结合多种技术——例如，使用系统提示和少量示例，或思维链和角色提示。Spring AI的灵活API使这些组合易于实现。
对于生产应用程序，请记住：
有了这些技术和Spring AI的强大抽象，您可以创建强大的人工智能驱动应用程序，提供一致、高质量的结果。</p>
<h2 id="参考文献">
  参考文献
  <a class="anchor" href="#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae">#</a>
</h2>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#即时工程模式">即时工程模式</a>
      <ul>
        <li><a href="#1配置">1.配置</a></li>
        <li><a href="#llm提供程序选择">LLM提供程序选择</a></li>
        <li><a href="#llm输出配置">LLM输出配置</a></li>
        <li><a href="#温度">温度</a></li>
        <li><a href="#输出长度maxtokens">输出长度（MaxTokens）</a></li>
        <li><a href="#采样控制top-k和top-p">采样控制（Top-K和Top-P）</a></li>
        <li><a href="#结构化响应格式">结构化响应格式</a></li>
        <li><a href="#型号特定选项">型号特定选项</a></li>
        <li><a href="#2即时工程技术">2.即时工程技术</a></li>
        <li><a href="#21零炮提示">2.1零炮提示</a></li>
        <li><a href="#22单发和少发提示">2.2单发和少发提示</a></li>
        <li><a href="#23系统上下文和角色提示">2.3系统、上下文和角色提示</a></li>
        <li><a href="#系统提示">系统提示</a></li>
        <li><a href="#角色提示">角色提示</a></li>
        <li><a href="#上下文提示">上下文提示</a></li>
        <li><a href="#24后退提示">2.4后退提示</a></li>
        <li><a href="#25思想链cot">2.5思想链（CoT）</a></li>
        <li><a href="#26自一致性">2.6自一致性</a></li>
        <li><a href="#27思想树tot">2.7思想树（ToT）</a></li>
        <li><a href="#28自动提示工程">2.8自动提示工程</a></li>
        <li><a href="#29代码提示">2.9代码提示</a></li>
        <li><a href="#结论">结论</a></li>
        <li><a href="#参考文献">参考文献</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












